(function(e){"use strict";e.maxmegamenu=function(n,i){var t=this;var a=e(n);var s=e(n).parent();var l=a.siblings(".mega-menu-toggle");var m;var o={event:a.attr("data-event"),effect:a.attr("data-effect"),effect_speed:parseInt(a.attr("data-effect-speed")),effect_mobile:a.attr("data-effect-mobile"),effect_speed_mobile:parseInt(a.attr("data-effect-speed-mobile")),panel_width:a.attr("data-panel-width"),panel_inner_width:a.attr("data-panel-inner-width"),mobile_force_width:a.attr("data-mobile-force-width"),mobile_overlay:a.attr("data-mobile-overlay"),mobile_state:a.attr("data-mobile-state"),mobile_direction:a.attr("data-mobile-direction"),second_click:a.attr("data-second-click"),vertical_behaviour:a.attr("data-vertical-behaviour"),document_click:a.attr("data-document-click"),breakpoint:a.attr("data-breakpoint"),unbind_events:a.attr("data-unbind"),hover_intent_timeout:a.attr("data-hover-intent-timeout"),hover_intent_interval:a.attr("data-hover-intent-interval")};t.settings={};var g=e("li.mega-menu-megamenu.mega-menu-item-has-children,"+"li.mega-menu-flyout.mega-menu-item-has-children,"+"li.mega-menu-tabbed > ul.mega-sub-menu > li.mega-menu-item-has-children,"+"li.mega-menu-flyout li.mega-menu-item-has-children",a);var u=e("li.mega-menu-megamenu li.mega-menu-item-has-children.mega-collapse-children > a.mega-menu-link",a);t.addAnimatingClass=function(n){if(t.settings.effect==="disabled"){return}e(".mega-animating").removeClass("mega-animating");var i=t.settings.effect_speed+parseInt(t.settings.hover_intent_timeout,10);n.addClass("mega-animating");setTimeout(function(){n.removeClass("mega-animating")},i)};t.hideAllPanels=function(){e(".mega-toggle-on > a.mega-menu-link",a).each(function(){t.hidePanel(e(this),false)})};t.expandMobileSubMenus=function(){if(t.settings.mobile_direction!=="vertical"){return}e(".mega-menu-item-has-children.mega-expand-on-mobile > a.mega-menu-link",a).each(function(){t.showPanel(e(this))});if(t.settings.mobile_state=="expand_all"){e(".mega-menu-item-has-children:not(.mega-toggle-on) > a.mega-menu-link",a).each(function(){t.showPanel(e(this),true)})}if(t.settings.mobile_state=="expand_active"){const n=["li.mega-current-menu-ancestor.mega-menu-item-has-children > a.mega-menu-link","li.mega-current-menu-item.mega-menu-item-has-children > a.mega-menu-link","li.mega-current-menu-parent.mega-menu-item-has-children > a.mega-menu-link","li.mega-current_page_ancestor.mega-menu-item-has-children > a.mega-menu-link","li.mega-current_page_item.mega-menu-item-has-children > a.mega-menu-link"];a.find(n.join(", ")).each(function(){t.showPanel(e(this))})}};t.hideSiblingPanels=function(n,i){n.parent().parent().find(".mega-toggle-on").children("a.mega-menu-link").each(function(){t.hidePanel(e(this),i)})};t.isDesktopView=function(){var e=Math.max(document.documentElement.clientWidth||0,window.innerWidth||0);return e>t.settings.breakpoint};t.isMobileView=function(){return!t.isDesktopView()};t.showPanel=function(n,i){if(e.isNumeric(n)){n=e("li.mega-menu-item-"+n,a).find("a.mega-menu-link").first()}else if(n.is("li.mega-menu-item")){n=n.find("a.mega-menu-link").first()}n.parent().triggerHandler("before_open_panel");n.parent().find("[aria-expanded]").first().attr("aria-expanded","true");e(".mega-animating").removeClass("mega-animating");if(t.isMobileView()&&n.parent().hasClass("mega-hide-sub-menu-on-mobile")){return}if(t.isDesktopView()&&(a.hasClass("mega-menu-horizontal")||a.hasClass("mega-menu-vertical"))&&!n.parent().hasClass("mega-collapse-children")){t.hideSiblingPanels(n,true)}if(t.isMobileView()&&a.hasClass("mega-keyboard-navigation")||t.settings.vertical_behaviour==="accordion"){t.hideSiblingPanels(n,false)}t.calculateDynamicSubmenuWidths(n);if(t.shouldUseSlideAnimation(n,i)){var s=t.isMobileView()?t.settings.effect_speed_mobile:t.settings.effect_speed;n.siblings(".mega-sub-menu").css("display","none").animate({"height":"show","paddingTop":"show","paddingBottom":"show","minHeight":"show"},s,function(){e(this).css("display","")})}n.parent().addClass("mega-toggle-on").triggerHandler("open_panel")};t.shouldUseSlideAnimation=function(e,n){if(n==true){return false}if(e.parent().hasClass("mega-collapse-children")){return true}if(t.isDesktopView()&&t.settings.effect==="slide"){return true}if(t.isMobileView()){if(t.settings.effect_mobile==="slide"){return true}if(t.settings.effect_mobile==="slide_left"||t.settings.effect_mobile==="slide_right"){return t.settings.mobile_direction!=="horizontal"}}return false};t.hidePanel=function(n,i){if(e.isNumeric(n)){n=e("li.mega-menu-item-"+n,a).find("a.mega-menu-link").first()}else if(n.is("li.mega-menu-item")){n=n.find("a.mega-menu-link").first()}n.parent().triggerHandler("before_close_panel");n.parent().find("[aria-expanded]").first().attr("aria-expanded","false");if(t.shouldUseSlideAnimation(n)){var s=t.isMobileView()?t.settings.effect_speed_mobile:t.settings.effect_speed;n.siblings(".mega-sub-menu").animate({"height":"hide","paddingTop":"hide","paddingBottom":"hide","minHeight":"hide"},s,function(){n.siblings(".mega-sub-menu").css("display","");n.parent().removeClass("mega-toggle-on").triggerHandler("close_panel")});return}if(i){n.siblings(".mega-sub-menu").css("display","none").delay(t.settings.effect_speed).queue(function(){e(this).css("display","").dequeue()})}n.siblings(".mega-sub-menu").find(".widget_media_video video").each(function(){this.player.pause()});n.parent().removeClass("mega-toggle-on").triggerHandler("close_panel");t.addAnimatingClass(n.parent())};t.calculateDynamicSubmenuWidths=function(n){if(n.parent().hasClass("mega-menu-megamenu")&&n.parent().parent().hasClass("max-mega-menu")&&t.settings.panel_width&&e(t.settings.panel_width).length>0){if(t.isDesktopView()){var i=a.offset();var s=e(t.settings.panel_width).offset();n.siblings(".mega-sub-menu").css({width:e(t.settings.panel_width).outerWidth(),left:s.left-i.left+"px"})}else{n.siblings(".mega-sub-menu").css({width:"",left:""})}}if(n.parent().hasClass("mega-menu-megamenu")&&n.parent().parent().hasClass("max-mega-menu")&&t.settings.panel_inner_width&&e(t.settings.panel_inner_width).length>0){var l=0;if(e(t.settings.panel_inner_width).length){l=parseInt(e(t.settings.panel_inner_width).width(),10)}else{l=parseInt(t.settings.panel_inner_width,10)}n.siblings(".mega-sub-menu").css({"paddingLeft":"","paddingRight":""});var m=parseInt(n.siblings(".mega-sub-menu").innerWidth(),10);if(t.isDesktopView()&&l>0&&l<m){n.siblings(".mega-sub-menu").css({"paddingLeft":(m-l)/2+"px","paddingRight":(m-l)/2+"px"})}}};t.bindClickEvents=function(){var n=false;e(document).on({"touchmove":function(e){n=true},"touchstart":function(e){n=false}});e(document).on("click touchend",function(i){if(!n&&t.settings.document_click==="collapse"&&!e(i.target).closest(".mega-menu-wrap").length){t.hideAllPanels();t.hideMobileMenu()}n=false});var i=e("> a.mega-menu-link",g).add(u);i.on("touchend.megamenu",function(e){if(t.settings.event==="hover_intent"){t.unbindHoverIntentEvents()}if(t.settings.event==="hover"){t.unbindHoverEvents()}});i.on("click.megamenu",function(i){if(e(i.target).hasClass("mega-indicator")){return}if(t.isDesktopView()&&e(this).parent().hasClass("mega-toggle-on")&&e(this).closest("ul.mega-sub-menu").parent().hasClass("mega-menu-tabbed")){if(t.settings.second_click==="go"){return}else{i.preventDefault();return}}if(n){return}if(t.isMobileView()&&e(this).parent().hasClass("mega-hide-sub-menu-on-mobile")){return}if((t.settings.second_click==="go"||e(this).parent().hasClass("mega-click-click-go"))&&e(this).attr("href")!==undefined){if(!e(this).parent().hasClass("mega-toggle-on")){i.preventDefault();t.showPanel(e(this))}}else{i.preventDefault();if(e(this).parent().hasClass("mega-toggle-on")){t.hidePanel(e(this),false)}else{t.showPanel(e(this))}}});if(t.settings.second_click==="disabled"){i.off("click.megamenu")}e(".mega-close-after-click:not(.mega-menu-item-has-children) > a.mega-menu-link",a).on("click",function(){t.hideAllPanels();t.hideMobileMenu()});e("button.mega-close",s).on("click",function(e){t.hideMobileMenu()})};t.bindHoverEvents=function(){g.on({"mouseenter.megamenu":function(){t.unbindClickEvents();if(!e(this).hasClass("mega-toggle-on")){t.showPanel(e(this).children("a.mega-menu-link"))}},"mouseleave.megamenu":function(){if(e(this).hasClass("mega-toggle-on")&&!e(this).hasClass("mega-disable-collapse")&&!e(this).parent().parent().hasClass("mega-menu-tabbed")){t.hidePanel(e(this).children("a.mega-menu-link"),false)}}})};t.bindHoverIntentEvents=function(){g.hoverIntent({over:function(){t.unbindClickEvents();if(!e(this).hasClass("mega-toggle-on")){t.showPanel(e(this).children("a.mega-menu-link"))}},out:function(){if(e(this).hasClass("mega-toggle-on")&&!e(this).hasClass("mega-disable-collapse")&&!e(this).parent().parent().hasClass("mega-menu-tabbed")){t.hidePanel(e(this).children("a.mega-menu-link"),false)}},timeout:t.settings.hover_intent_timeout,interval:t.settings.hover_intent_interval})};t.bindKeyboardEvents=function(){var n=9;var i=27;var m=13;var o=37;var u=38;var r=39;var d=40;var f=32;var c=function(){return t.isMobileView()&&(t.settings.effect_mobile==="slide_right"||t.settings.effect_mobile==="")&&t.settings.mobile_direction==="horizontal"};var h=function(){return c()&&(keyCode===u||keyCode===d||keyCode===n)};s.on("keyup.megamenu",".max-mega-menu, .mega-menu-toggle",function(i){var t=i.keyCode||i.which;var a=e(i.target);if(t===n){s.addClass("mega-keyboard-navigation")}});s.on("keydown.megamenu","a.mega-menu-link, .mega-indicator, .mega-menu-toggle-block, .mega-menu-toggle-animated-block button",function(n){if(!s.hasClass("mega-keyboard-navigation")){return}var c=n.keyCode||n.which;var b=e(n.target);if(c===f&&b.is(".mega-menu-link")){n.preventDefault();if(b.parent().is(g)){if(b.parent().hasClass("mega-toggle-on")&&!b.closest("ul.mega-sub-menu").parent().hasClass("mega-menu-tabbed")){t.hidePanel(b)}else{t.showPanel(b)}}}if(c===f&&b.is("mega-indicator")){n.preventDefault();if(b.parent().parent().hasClass("mega-toggle-on")&&!b.closest("ul.mega-sub-menu").parent().hasClass("mega-menu-tabbed")){t.hidePanel(b.parent())}else{t.showPanel(b.parent())}}if(c===i){var p=e(".mega-toggle-on",a).length!==0;if(p){var v=a.find(":focus");if(v.closest(".mega-menu-flyout.mega-toggle-on").length!==0){var k=v.closest(".mega-toggle-on");var _=e("> a.mega-menu-link",k);t.hidePanel(_);_.focus()}if(v.closest(".mega-menu-megamenu.mega-toggle-on").length!==0){var k=v.closest(".mega-menu-megamenu.mega-toggle-on");var _=e("> a.mega-menu-link",k);t.hidePanel(_);_.focus()}}if(t.isMobileView()&&!p){t.hideMobileMenu();e(".mega-menu-toggle-block, button.mega-toggle-animated",l).first().focus()}}if(c===f||c===m){if(b.is(".mega-menu-toggle-block, .mega-menu-toggle-animated-block button")){n.preventDefault();if(l.hasClass("mega-menu-open")){t.hideMobileMenu()}else{t.showMobileMenu()}}}if(c===m){if(b.is(".mega-indicator")){if(b.closest("li.mega-menu-item").hasClass("mega-toggle-on")&&!b.closest("ul.mega-sub-menu").parent().hasClass("mega-menu-tabbed")){t.hidePanel(b.parent())}else{t.showPanel(b.parent())}return}if(b.parent().is(g)){if(t.isMobileView()&&b.parent().is(".mega-hide-sub-menu-on-mobile")){return}if(b.is("[href]")&&b.siblings(".mega-indicator[tabindex]:visible").length!==0){return}if(b.is("[href]")===false){if(b.parent().hasClass("mega-toggle-on")&&!b.closest("ul.mega-sub-menu").parent().hasClass("mega-menu-tabbed")){t.hidePanel(b)}else{t.showPanel(b)}return}if(b.parent().hasClass("mega-toggle-on")&&!b.closest("ul.mega-sub-menu").parent().hasClass("mega-menu-tabbed")){return}else{n.preventDefault();t.showPanel(b)}}}if(h()){var w=e(":focus",a);if(w.length===0){n.preventDefault();e("> li.mega-menu-item:visible",a).find("> a.mega-menu-link, .mega-search span[role=button]").first().focus();return}var C=w.parent().nextAll("li.mega-menu-item:visible").find("> a.mega-menu-link, .mega-search span[role=button]").first();if(C.length===0&&w.closest(".mega-menu-megamenu").length!==0){var M=w.parentsUntil(".mega-menu-megamenu");if(w.is(M.find("a.mega-menu-link").last())){C=M.find(".mega-back-button:visible > a.mega-menu-link").first()}}if(C.length===0){C=w.parent().prevAll("li.mega-menu-item:visible").find("> a.mega-menu-link, .mega-search span[role=button]").first()}if(C.length!==0){n.preventDefault();C.focus()}}var y=function(){return(c===r&&t.isDesktopView()||c===d&&t.isMobileView())&&a.hasClass("mega-menu-horizontal")};var P=function(){return(c===o&&t.isDesktopView()||c===u&&t.isMobileView())&&a.hasClass("mega-menu-horizontal")};if(y()){n.preventDefault();var D=e("> .mega-toggle-on",a).nextAll("li.mega-menu-item:visible").find("> a.mega-menu-link, .mega-search span[role=button]").first();if(D.length===0){D=e(":focus",a).parent().nextAll("li.mega-menu-item:visible").find("> a.mega-menu-link, .mega-search span[role=button]").first()}if(D.length===0){D=e(":focus",a).parent().parent().parent().nextAll("li.mega-menu-item:visible").find("> a.mega-menu-link, .mega-search span[role=button]").first()}t.hideAllPanels();D.focus()}if(P()){n.preventDefault();var x=e("> .mega-toggle-on",a).prevAll("li.mega-menu-item:visible").find("> a.mega-menu-link, .mega-search span[role=button]").last();if(x.length===0){x=e(":focus",a).parent().prevAll("li.mega-menu-item:visible").find("> a.mega-menu-link, .mega-search span[role=button]").last()}if(x.length===0){x=e(":focus",a).parent().parent().parent().prevAll("li.mega-menu-item:visible").find("> a.mega-menu-link, .mega-search span[role=button]").last()}t.hideAllPanels();x.focus()}});s.on("focusout.megamenu",function(e){if(s.hasClass("mega-keyboard-navigation")){setTimeout(function(){var e=s.find(":focus").length>0;if(!e){s.removeClass("mega-keyboard-navigation");t.hideAllPanels();t.hideMobileMenu()}},10)}})};t.unbindAllEvents=function(){e("ul.mega-sub-menu, li.mega-menu-item, li.mega-menu-row, li.mega-menu-column, a.mega-menu-link, .mega-indicator",a).off()};t.unbindClickEvents=function(){e("> a.mega-menu-link",g).not(u).off("click.megamenu touchend.megamenu")};t.unbindHoverEvents=function(){g.off("mouseenter.megamenu mouseleave.megamenu")};t.unbindHoverIntentEvents=function(){g.off("mouseenter mouseleave").removeProp("hoverIntent_t").removeProp("hoverIntent_s")};t.unbindKeyboardEvents=function(){s.off("keyup.megamenu keydown.megamenu focusout.megamenu")};t.unbindMegaMenuEvents=function(){if(t.settings.event==="hover_intent"){t.unbindHoverIntentEvents()}if(t.settings.event==="hover"){t.unbindHoverEvents()}t.unbindClickEvents();t.unbindKeyboardEvents()};t.bindMegaMenuEvents=function(){t.unbindMegaMenuEvents();if(t.isDesktopView()&&t.settings.event==="hover_intent"){t.bindHoverIntentEvents()}if(t.isDesktopView()&&t.settings.event==="hover"){t.bindHoverEvents()}t.bindClickEvents();t.bindKeyboardEvents()};t.checkWidth=function(){if(t.isMobileView()&&a.data("view")==="desktop"){t.switchToMobile()}if(t.isDesktopView()&&a.data("view")==="mobile"){t.switchToDesktop()}t.calculateDynamicSubmenuWidths(e("> li.mega-menu-megamenu > a.mega-menu-link",a))};t.reverseRightAlignedItems=function(){if(!e("body").hasClass("rtl")&&a.hasClass("mega-menu-horizontal")){a.append(a.children("li.mega-item-align-right").get().reverse())}};t.addClearClassesToMobileItems=function(){e(".mega-menu-row",a).each(function(){e("> .mega-sub-menu > .mega-menu-column:not(.mega-hide-on-mobile)",e(this)).filter(":even").addClass("mega-menu-clear")})};t.initDesktop=function(){a.data("view","desktop");t.bindMegaMenuEvents();t.initIndicators()};t.initMobile=function(){t.switchToMobile()};t.switchToDesktop=function(){a.data("view","desktop");t.bindMegaMenuEvents();t.reverseRightAlignedItems();t.hideAllPanels();t.hideMobileMenu(true)};t.switchToMobile=function(){a.data("view","mobile");t.bindMegaMenuEvents();t.initIndicators();t.reverseRightAlignedItems();t.addClearClassesToMobileItems();t.hideAllPanels();t.expandMobileSubMenus()};t.initToggleBar=function(){l.on("click",function(n){if(e(n.target).is(".mega-menu-toggle, .mega-menu-toggle-custom-block *, .mega-menu-toggle-block, .mega-menu-toggle-animated-block, .mega-menu-toggle-animated-block *, .mega-toggle-blocks-left, .mega-toggle-blocks-center, .mega-toggle-blocks-right, .mega-toggle-label, .mega-toggle-label span")){n.preventDefault();if(e(this).hasClass("mega-menu-open")){t.hideMobileMenu()}else{t.showMobileMenu()}}})};t.initIndicators=function(){a.off("click.megamenu",".mega-indicator");a.on("click.megamenu",".mega-indicator",function(n){n.preventDefault();n.stopPropagation();if(e(this).closest(".mega-menu-item").hasClass("mega-toggle-on")){if(!e(this).closest("ul.mega-sub-menu").parent().hasClass("mega-menu-tabbed")||t.isMobileView()){t.hidePanel(e(this).parent(),false)}}else{t.showPanel(e(this).parent(),false)}})};t.hideMobileMenu=function(n){n=n||false;if(!l.is(":visible")&&!n){return}m=setTimeout(function(){e("body").removeClass(a.attr("id")+"-mobile-open");e("html").removeClass(a.attr("id")+"-off-canvas-open")},t.settings.effect_speed_mobile);e(".mega-toggle-label, .mega-toggle-animated",l).attr("aria-expanded","false");if(t.settings.effect_mobile==="slide"&&!n){a.animate({"height":"hide"},t.settings.effect_speed_mobile,function(){a.css({width:"",left:"",display:""});l.removeClass("mega-menu-open")})}else{a.css({width:"",left:"",display:""});l.removeClass("mega-menu-open")}a.triggerHandler("mmm:hideMobileMenu")};t.showMobileMenu=function(){if(!l.is(":visible")){return}clearTimeout(m);e("body").addClass(a.attr("id")+"-mobile-open");t.expandMobileSubMenus();if(t.settings.effect_mobile==="slide_left"||t.settings.effect_mobile==="slide_right"){e("html").addClass(a.attr("id")+"-off-canvas-open")}e(".mega-toggle-label, .mega-toggle-animated",l).attr("aria-expanded","true");if(t.settings.effect_mobile==="slide"){a.animate({"height":"show"},t.settings.effect_speed_mobile,function(){e(this).css("display","")})}l.addClass("mega-menu-open");t.toggleBarForceWidth();a.triggerHandler("mmm:showMobileMenu")};t.toggleBarForceWidth=function(){if(e(t.settings.mobile_force_width).length&&(t.settings.effect_mobile==="slide"||t.settings.effect_mobile==="disabled")){var n=l.offset();var i=e(t.settings.mobile_force_width).offset();a.css({width:e(t.settings.mobile_force_width).outerWidth(),left:i.left-n.left+"px"})}};t.init=function(){a.triggerHandler("before_mega_menu_init");t.settings=e.extend({},o,i);a.removeClass("mega-no-js");t.initToggleBar();if(t.settings.unbind_events==="true"){t.unbindAllEvents()}e(window).on("load",function(){t.calculateDynamicSubmenuWidths(e("> li.mega-menu-megamenu > a.mega-menu-link",a))});if(t.isDesktopView()){t.initDesktop()}else{t.initMobile()}e(window).on("resize",function(){t.checkWidth()});a.triggerHandler("after_mega_menu_init")};t.init()};e.fn.maxmegamenu=function(n){return this.each(function(){if(undefined===e(this).data("maxmegamenu")){var i=new e.maxmegamenu(this,n);e(this).data("maxmegamenu",i)}})};e(function(){e(".max-mega-menu").maxmegamenu()})})(jQuery);