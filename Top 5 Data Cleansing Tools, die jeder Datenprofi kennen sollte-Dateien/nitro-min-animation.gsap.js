(function(e,n){if(typeof define==="function"&&define.amd){define(["ScrollMagic","TweenMax","TimelineMax"],n)}else if(typeof exports==="object"){require("gsap");n(require("scrollmagic"),TweenMax,TimelineMax)}else{n(e.ScrollMagic||e.jQuery&&e.jQuery.ScrollMagic,e.TweenMax||e.TweenLite,e.TimelineMax||e.TimelineLite)}})(this,function(e,n,i){"use strict";var r="animation.gsap";var t=window.console||{},o=Function.prototype.bind.call(t.error||t.log||function(){},t);if(!e){o("("+r+") -> ERROR: The ScrollMagic main module could not be found. Please make sure it's loaded before this plugin or use an asynchronous loader like requirejs.")}if(!n){o("("+r+") -> ERROR: TweenLite or TweenMax could not be found. Please make sure GSAP is loaded before ScrollMagic or use an asynchronous loader like requirejs.")}e.Scene.addOption("tweenChanges",false,function(e){return!!e});e.Scene.extend(function(){var e=this,t;var o=function(){if(e._log){Array.prototype.splice.call(arguments,1,0,"("+r+")","->");e._log.apply(this,arguments)}};e.on("progress.plugin_gsap",function(){a()});e.on("destroy.plugin_gsap",function(n){e.removeTween(n.reset)});var a=function(){if(t){var n=e.progress(),i=e.state();if(t.repeat&&t.repeat()===-1){if(i==="DURING"&&t.paused()){t.play()}else if(i!=="DURING"&&!t.paused()){t.pause()}}else if(n!=t.progress()){if(e.duration()===0){if(n>0){t.play()}else{t.reverse()}}else{if(e.tweenChanges()&&t.tweenTo){t.tweenTo(n*t.duration())}else{t.progress(n).pause()}}}}};e.setTween=function(r,l,s){var f;if(arguments.length>1){if(arguments.length<3){s=l;l=1}r=n.to(r,l,s)}try{if(i){f=new i({smoothChildTiming:true}).add(r)}else{f=r}f.pause()}catch(n){o(1,"ERROR calling method 'setTween()': Supplied argument is not a valid TweenObject");return e}if(t){e.removeTween()}t=f;if(r.repeat&&r.repeat()===-1){t.repeat(-1);t.yoyo(r.yoyo())}if(e.tweenChanges()&&!t.tweenTo){o(2,"WARNING: tweenChanges will only work if the TimelineMax object is available for ScrollMagic.")}if(t&&e.controller()&&e.triggerElement()&&e.loglevel()>=2){var u=n.getTweensOf(e.triggerElement()),c=e.controller().info("vertical");u.forEach(function(e,n){var i=e.vars.css||e.vars,r=c?i.top!==undefined||i.bottom!==undefined:i.left!==undefined||i.right!==undefined;if(r){o(2,"WARNING: Tweening the position of the trigger element affects the scene timing and should be avoided!");return false}})}if(parseFloat(TweenLite.version)>=1.14){var d=t.getChildren?t.getChildren(true,true,false):[t],p=function(){o(2,"WARNING: tween was overwritten by another. To learn how to avoid this issue see here: https://github.com/janpaepke/ScrollMagic/wiki/WARNING:-tween-was-overwritten-by-another")};for(var g=0,w,h;g<d.length;g++){w=d[g];if(h!==p){h=w.vars.onOverwrite;w.vars.onOverwrite=function(){if(h){h.apply(this,arguments)}p.apply(this,arguments)}}}}o(3,"added tween");a();return e};e.removeTween=function(n){if(t){if(n){t.progress(0).pause()}t.kill();t=undefined;o(3,"removed tween (reset: "+(n?"true":"false")+")")}return e}})});